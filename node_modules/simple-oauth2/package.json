{
  "_from": "simple-oauth2",
  "_id": "simple-oauth2@2.2.1",
  "_inBundle": false,
  "_integrity": "sha512-Ujn8tU9Nl4CLy5L6ksSL+kJ6eI61NyhLCUZPris6aHMGxnfAnqrYdmTN16VSEl9m5W9WPj1sXJvhoi6kihsaSA==",
  "_location": "/simple-oauth2",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "simple-oauth2",
    "fetchSpec": "latest",
    "name": "simple-oauth2",
    "raw": "simple-oauth2",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/simple-oauth2/-/simple-oauth2-2.2.1.tgz",
  "_shasum": "c1d20133d0b087bd01c6e33e31a56d70ee5194d1",
  "_spec": "simple-oauth2",
  "_where": "/home/raul/Documents/_01 semeste de la universidad/semestre_agosto_2018/Base de Datos/node-auth-office365/node-tutorial",
  "author": {
    "email": "andrea.reginato@gmail.com",
    "name": "Andrea Reginato"
  },
  "bugs": {
    "url": "https://github.com/lelylan/simple-oauth2/issues"
  },
  "bundleDependencies": false,
  "contributors": [
    {
      "name": "Jonathan Samines",
      "email": "jn.samines@gmail.com"
    }
  ],
  "dependencies": {
    "date-fns": "^1.3.0",
    "debug": "^3.1.0",
    "joi": "^13.0.2",
    "wreck": "^14.0.2"
  },
  "deprecated": false,
  "description": "Node.js client for OAuth2",
  "devDependencies": {
    "chai": "^4.1.2",
    "chance": "^1.0.13",
    "chance-access-token": "^1.0.1",
    "doctoc": "^1.0.0",
    "eslint": "^4.19.1",
    "eslint-config-airbnb-base": "^12.0.0",
    "eslint-plugin-import": "^2.9.0",
    "lodash": "^4.17.5",
    "mocha": "^5.0.1",
    "nock": "^9.2.3",
    "nyc": "^11.6.0"
  },
  "engine": {
    "node": ">=8.0"
  },
  "homepage": "https://github.com/lelylan/simple-oauth2",
  "keywords": [
    "authorization",
    "client",
    "credentials",
    "oauth2",
    "password"
  ],
  "license": "Apache-2.0",
  "main": "index.js",
  "name": "simple-oauth2",
  "nyc": {
    "branches": 100,
    "check-coverage": true,
    "functions": 100,
    "lines": 100,
    "reporter": [
      "lcov",
      "text-summary"
    ],
    "statements": 100
  },
  "optionalDependencies": {},
  "readme": "# Simple OAuth2\n\n[![NPM Package Version](https://img.shields.io/npm/v/simple-oauth2.svg?style=flat-square)](https://www.npmjs.com/package/simple-oauth2)\n[![Build Status](https://img.shields.io/travis/lelylan/simple-oauth2.svg?style=flat-square)](https://travis-ci.org/lelylan/simple-oauth2)\n[![Dependency Status](https://img.shields.io/david/lelylan/simple-oauth2.svg?style=flat-square)](https://david-dm.org/lelylan/simple-oauth2)\n\nNode.js client library for [OAuth2](http://oauth.net/2/).\n\nOAuth2 lets users grant the access to the desired resources to third party applications,\ngiving them the possibility to enable and disable those accesses whenever they want.\n\nSimple OAuth2 supports the following flows.\n\n* [Authorization Code Flow](http://tools.ietf.org/html/draft-ietf-oauth-v2-31#section-4.1) (for apps with servers that can store persistent information).\n* [Password Credentials](http://tools.ietf.org/html/draft-ietf-oauth-v2-31#section-4.3) (when previous flow can't be used or during development).\n* [Client Credentials Flow](http://tools.ietf.org/html/draft-ietf-oauth-v2-31#section-4.4) (the client can request an access token using only its client credentials)\n\n#### Thanks to Open Source\n\nSimple OAuth 2.0 come to life thanks to the work I've made in Lelylan, an open source microservices architecture for the Internet of Things. If this project helped you in any way, think about giving us a <a href=\"https://github.com/lelylan/lelylan\">star on Github</a>.\n\n<a href=\"https://github.com/lelylan/lelylan\">\n<img src=\"https://raw.githubusercontent.com/lelylan/lelylan/master/public/logo-lelylan.png\" data-canonical-src=\"https://raw.githubusercontent.com/lelylan/lelylan/master/public/logo-lelylan.png\" width=\"300\"/></a>\n\n## Table of Contents\n\n<!-- START doctoc generated TOC please keep comment here to allow auto update -->\n<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\n\n\n- [Requirements](#requirements)\n- [Getting started](#getting-started)\n  - [Installation](#installation)\n  - [Options](#options)\n  - [Example of Usage](#example-of-usage)\n- [OAuth2 Supported flows](#oauth2-supported-flows)\n  - [Authorization Code flow](#authorization-code-flow)\n  - [Password Credentials Flow](#password-credentials-flow)\n  - [Client Credentials Flow](#client-credentials-flow)\n- [Helpers](#helpers)\n  - [Access Token object](#access-token-object)\n  - [Errors](#errors)\n- [Contributing](#contributing)\n- [Authors](#authors)\n  - [Contributors](#contributors)\n- [Changelog](#changelog)\n- [License](#license)\n\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n\n## Requirements\n\nThe node client library is tested against the latest Node 8 LTS and newer versions.\n\nTo use in node 4, 5 or 6, please use [simple-oauth2@1.x](https://github.com/lelylan/simple-oauth2/tree/1.5.0). Older node versions are unsupported.\n\n## Getting started\n\n### Installation\n\nInstall the client library using [npm](http://npmjs.org/):\n\n```bash\nnpm install --save simple-oauth2\n```\n\n### Options\n\nSimple OAuth2 accepts an object with the following valid params.\n\n* `client` - required object with the following properties:\n  * `id` - Service registered client id. Required.\n  * `secret` - Service registered client secret. Required.\n  * `secretParamName` - Parameter name used to send the client secret. Default to **client_secret**.\n  * `idParamName` - Parameter name used to send the client id. Default to **client_id**.\n\n* `auth` - required object with the following properties.\n  * `tokenHost` - String used to set the host to request the tokens to. Required.\n  * `tokenPath` - String path to request an access token. Default to **/oauth/token**.\n  * `revokePath` - String path to revoke an access token. Default to **/oauth/revoke**.\n  * `authorizeHost` - String used to set the host to request an \"authorization code\". Default to the value set on `auth.tokenHost`.\n  * `authorizePath` - String path to request an authorization code. Default to **/oauth/authorize**.\n\n* `http` optional object used to set global options to the internal http library ([wreck](https://github.com/hapijs/wreck)).\n  * All options except **baseUrl** are allowed. Default to `headers.Accept = application/json`.\n\n* `options` optional object to setup the module.\n  * `bodyFormat` - Format of data sent in the request body. Valid options are `form` or `json`. Defaults to **form**.\n  * `authorizationMethod` - Indicates the method used to send the client.id/client.secret authorization params at the token request. Valid options are `header` or `body`. If set to **body**, the **bodyFormat** option will be used to format the credentials. Defaults to **header**.\n\n```javascript\n// Set the configuration settings\nconst credentials = {\n  client: {\n    id: '<client-id>',\n    secret: '<client-secret>'\n  },\n  auth: {\n    tokenHost: 'https://api.oauth.com'\n  }\n};\n\n// Initialize the OAuth2 Library\nconst oauth2 = require('simple-oauth2').create(credentials);\n```\n\n### Example of Usage\n\nSee the [example folder](./example).\n\n## OAuth2 Supported flows\n\n### Authorization Code flow\n\nThe Authorization Code flow is made up from two parts. At first your application asks to\nthe user the permission to access their data. If the user approves the OAuth2 server sends\nto the client an authorization code. In the second part, the client POST the authorization code\nalong with its client secret to the oauth server in order to get the access token.\n\n```javascript\nconst oauth2 = require('simple-oauth2').create(credentials);\n\n// Authorization oauth2 URI\nconst authorizationUri = oauth2.authorizationCode.authorizeURL({\n  redirect_uri: 'http://localhost:3000/callback',\n  scope: '<scope>', // also can be an array of multiple scopes, ex. ['<scope1>, '<scope2>', '...']\n  state: '<state>'\n});\n\n// Redirect example using Express (see http://expressjs.com/api.html#res.redirect)\nres.redirect(authorizationUri);\n\n// Get the access token object (the authorization code is given from the previous step).\nconst tokenConfig = {\n  code: '<code>',\n  redirect_uri: 'http://localhost:3000/callback',\n  scope: '<scope>', // also can be an array of multiple scopes, ex. ['<scope1>, '<scope2>', '...']\n};\n\n// Save the access token\ntry {\n  const result = await oauth2.authorizationCode.getToken(tokenConfig)\n  const accessToken = oauth2.accessToken.create(result);\n} catch (error) {\n  console.log('Access Token Error', error.message);\n}\n\n```\n\n### Password Credentials Flow\n\nThis flow is suitable when the resource owner has a trust relationship with the\nclient, such as its computer operating system or a highly privileged application.\nUse this flow only when other flows are not viable or when you need a fast way to\ntest your application.\n\n```javascript\nconst oauth2 = require('simple-oauth2').create(credentials);\n\n// Get the access token object.\nconst tokenConfig = {\n  username: 'username',\n  password: 'password',\n  scope: '<scope>', // also can be an array of multiple scopes, ex. ['<scope1>, '<scope2>', '...']\n};\n\n// Save the access token\ntry {\n  const result = await oauth2.ownerPassword.getToken(tokenConfig);\n  const accessToken = oauth2.accessToken.create(result);\n} catch (error) {\n  console.log('Access Token Error', error.message);\n}\n```\n\n### Client Credentials Flow\n\nThis flow is suitable when client is requesting access to the protected resources under its control.\n\n```javascript\nconst oauth2 = require('simple-oauth2').create(credentials);\nconst tokenConfig = {\n  scope: '<scope>', // also can be an array of multiple scopes, ex. ['<scope1>, '<scope2>', '...']\n};\n\n// Get the access token object for the client\ntry {\n  const result = await oauth2.clientCredentials.getToken(tokenConfig);\n  const accessToken = oauth2.accessToken.create(result);\n} catch (error) {\n  console.log('Access Token error', error.message);\n}\n```\n\n## Helpers\n\n### Access Token object\n\nWhen a token expires we need to refresh it. Simple OAuth2 offers the\nAccessToken class that add a couple of useful methods to refresh the\naccess token when it is expired.\n\n```javascript\n// Sample of a JSON access token (you got it through previous steps)\nconst tokenObject = {\n  'access_token': '<access-token>',\n  'refresh_token': '<refresh-token>',\n  'expires_in': '7200'\n};\n\n// Create the access token wrapper\nlet accessToken = oauth2.accessToken.create(tokenObject);\n\n// Check if the token is expired. If expired it is refreshed.\nif (accessToken.expired()) {\n  try {\n    accessToken = await accessToken.refresh();\n  } catch (error) {\n    console.log('Error refreshing access token: ', error.message);\n  }\n}\n```\n\nThe `expired` helper is useful for knowing when a token has definitively\nexpired. However, there is a common race condition when tokens are near\nexpiring. If an OAuth 2.0 token is issued with a `expires_in` property (as\nopposed to an `expires_at` property), there can be discrepancies between the\ntime the OAuth 2.0 server issues the access token and when it is received.\nThese come down to factors such as network and processing latency. This can be\nworked around by preemptively refreshing the access token:\n\n```javascript\n// Provide a window of time before the actual expiration to refresh the token\nconst EXPIRATION_WINDOW_IN_SECONDS = 300;\n\nconst { token } = accessToken;\nconst expirationTimeInSeconds = token.expires_at.getTime() / 1000;\nconst expirationWindowStart = expirationTimeInSeconds - EXPIRATION_WINDOW_IN_SECONDS;\n\n// If the start of the window has passed, refresh the token\nconst nowInSeconds = (new Date()).getTime() / 1000;\nconst shouldRefresh = nowInSeconds >= expirationWindowStart;\nif (shouldRefresh) {\n  try {\n    accessToken = await accessToken.refresh();\n  } catch (error) {\n    console.log('Error refreshing access token: ', error.message);\n  }\n}\n```\n\nWhen you've done with the token or you want to log out, you can\nrevoke the access token and refresh token.\n\n```javascript\n// Revoke both access and refresh tokens\ntry {\n  // Revoke only the access token\n  await accessToken.revoke('access_token');\n\n  // Session ended. But the refresh_token is still valid.\n  // Revoke the refresh token\n  await accessToken.revoke('refresh_token');\n} catch (error) {\n  console.log('Error revoking token: ', error.message);\n}\n```\n\nAs a convenience method, you can also revoke both tokens in a single call:\n\n```javascript\n// Revoke both access and refresh tokens\ntry {\n  // Revokes both tokens, refresh token is only revoked if the access_token is properly revoked\n  await accessToken.revokeAll();\n} catch (error) {\n  console.log('Error revoking token: ', error.message);\n}\n```\n\n### Errors\n\nErrors are returned when a 4xx or 5xx status code is received.\n\n    BoomError\n\nAs a standard [boom](https://github.com/hapijs/boom) error you can access any of the boom error properties. The total amount of information varies according to the generated status code.\n\n```javascript\n\ntry {\n  await oauth2.authorizationCode.getToken();\n} catch(error) {\n  console.log(error);\n}\n\n// => {\n//     \"statusCode\": 401,\n//     \"error\": \"Unauthorized\",\n//     \"message\": \"invalid password\"\n// }\n```\n\n## Contributing\n\nSee [CONTRIBUTING](https://github.com/lelylan/simple-oauth2/blob/master/CONTRIBUTING.md)\n\n## Authors\n\n[Andrea Reginato](http://twitter.com/lelylan)\n\n### Contributors\n\nSpecial thanks to the following people for submitting patches.\n\n* [Jonathan Samines](http://twitter.com/jonathansamines)\n\n## Changelog\n\nSee [CHANGELOG](https://github.com/lelylan/simple-oauth2/blob/master/CHANGELOG.md)\n\n## License\n\nSimple OAuth 2.0 is licensed under the [Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/lelylan/simple-oauth2.git"
  },
  "scripts": {
    "clean-install": "rm -rf node_modules && npm install",
    "docs-gen": "doctoc README.md --github --no-title",
    "fix": "eslint . --fix",
    "lint": "eslint .",
    "posttest": "nyc check-coverage",
    "pretest": "npm run lint",
    "test": "nyc mocha",
    "test-watch": "mocha --watch --reporter=spec"
  },
  "version": "2.2.1"
}
